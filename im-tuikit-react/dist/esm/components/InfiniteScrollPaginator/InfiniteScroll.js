import{__rest as e,__assign as r}from"tslib";import o,{useRef as n,useCallback as t,useEffect as i}from"react";var l=function(e){e instanceof WheelEvent&&1===e.deltaY&&e.preventDefault()};function a(a){var d=a.children,v=a.element,s=void 0===v?"div":v,c=a.hasMore,u=void 0!==c&&c,f=a.hasMoreNewer,h=void 0!==f&&f,p=a.initialLoad,m=void 0===p||p,L=a.isLoading,E=void 0!==L&&L,M=a.listenToScroll,N=a.loader,w=a.loadMore,g=a.loadMoreNewer,T=a.threshold,b=void 0===T?150:T,y=a.useCapture,z=void 0!==y&&y,C=e(a,["children","element","hasMore","hasMoreNewer","initialLoad","isLoading","listenToScroll","loader","loadMore","loadMoreNewer","threshold","useCapture"]),H=n(),S=t((function(){var e=H.current;if(e&&null!==e.offsetParent){var r=e.parentElement,o=e.scrollHeight-r.scrollTop-r.clientHeight,n=r.scrollTop;M&&M(o,n,b),n<Number(b)&&"function"==typeof w&&u&&w(),o<Number(b)&&"function"==typeof g&&h&&g()}}),[u,h,b,M,w,g]);i((function(){var e,r=null===(e=H.current)||void 0===e?void 0:e.parentNode;return E||!r?function(){}:(r.addEventListener("scroll",S,z),r.addEventListener("resize",S,z),function(){r.removeEventListener("scroll",S,z),r.removeEventListener("resize",S,z)})}),[m,E,S,z]),i((function(){var e,r=null===(e=H.current)||void 0===e?void 0:e.parentNode;return r&&r.addEventListener("wheel",l,{passive:!1}),function(){r&&r.removeEventListener("wheel",l,z)}}),[z]);var x=r(r({},C),{ref:function(e){H.current=e}}),D=[N,d];return o.createElement(s,x,D)}export{a as InfiniteScroll};
