import{__assign as e}from"tslib";import{jsxs as n,jsx as o}from"react/jsx-runtime";import i,{useRef as t,useState as r}from"react";import{Avatar as a}from"../Avatar/Avatar.js";import{Icon as s}from"../Icon/Icon.js";import{IconTypes as c}from"../Icon/type.js";import{Plugins as l}from"../Plugins/index.js";import{useConversation as m}from"../../hooks/useConversation.js";import{useTUIKitContext as d}from"../../context/TUIKitContext.js";function v(i){var v=i.conversation,p=i.Avatar,u=void 0===p?a:p,h=i.displayImage,f=i.displayTitle,N=i.displayMessage,C=i.displayTime,P=i.unread,g=i.active,w=i.setActiveConversation,y=t(null),I=g?"conversation-preview-content--active":"",b=P&&P>=1?"conversation-preview-content--unread":"",j=v.isPinned?"conversation-preview-content--pin":"",x=r(!1),k=x[0],M=x[1],A=d("ConversationPreviewContent"),D=A.tim,T=A.conversation,E=m(D),F=E.pinConversation,z=E.deleteConversation,K=function(e){var n=v.conversationID,o=v.isPinned;switch(e){case"pin":F({conversationID:n,isPinned:!o});break;case"delete":z(n),v===T&&w(null)}};return n("button",e({type:"button","aria-selected":g,role:"option",className:"conversation-preview-container ".concat(I," ").concat(b," ").concat(j),onClick:function(){w&&w(v),(null==y?void 0:y.current)&&y.current.blur()},onMouseEnter:function(){M(!0)},onMouseLeave:function(){M(!1)},ref:y},{children:[o("div",e({className:"avatar"},{children:o(u,{image:h,name:f,size:40})})),n("div",e({className:"content"},{children:[o("div",e({className:"title"},{children:f})),o("div",e({className:"message"},{children:N}))]})),n("div",e({className:"external"},{children:[o("div",P?e({className:"unread"},{children:P<=99?P:"99+"}):{className:"unread"}),o("div",k?e({className:"".concat(k?"more--hover":"more")},{children:o(l,{customClass:"more-handle-box",plugins:[o("div",e({role:"presentation",className:"more-handle-item",onClick:function(e){e.stopPropagation(),K("pin")}},{children:v.isPinned?"Cancel Pin":"Pin"})),o("div",e({className:"more-handle-item",style:{color:"#FF584C"},onClick:function(e){e.stopPropagation(),K("delete")},role:"presentation"},{children:"Delete"}))],showNumber:0,MoreIcon:o(s,{className:"icon-more",width:16,height:16,type:c.MORE})})}):e({className:"time"},{children:C}))]}))]}))}var p=i.memo(v);export{p as ConversationPreviewContent,v as unMemoConversationPreviewContent};
