import{__assign as e}from"tslib";import{jsxs as r,jsx as t}from"react/jsx-runtime";import{isThisYear as a,format as i,isToday as n,isYesterday as s,formatDistance as o,isThisWeek as c}from"date-fns";import l from"tim-js-sdk/tim-js-friendship";import"react";import"../Icon/config.js";import"../Icon/type.js";import{defaultGroupAvatarWork as d}from"../Avatar/default.js";var u=function(a,i,n){void 0===n&&(n="#147AFF");var s=m(a),o=s.name,c=s.nick,d=s.groupID,u=s.userID,f="";switch(a.type){case l.TYPES.CONV_C2C:f=c||u;break;case l.TYPES.CONV_GROUP:f=o||d;break;default:f=""}var p,v;return i?(v=(p=f).indexOf(i),r("div",{children:[t("span",{children:p.slice(0,v)}),t("span",e({style:{color:n}},{children:i})),t("span",{children:p.slice(v+i.length)})]})):f},f=function(e){var r=e.type,t=m(e).avatar,a=t;if(!t)switch(r){case l.TYPES.CONV_C2C:a="";break;case l.TYPES.CONV_GROUP:default:a=d}return a},p=function(a,i){var n=a.lastMessage,s=a.type,o=n.fromAccount,c=n.nick,d=n.nameCard,u=n.isRevoked,f="";switch(s){case l.TYPES.CONV_GROUP:f=(null==n?void 0:n.fromAccount)===(null==i?void 0:i.userID)?"You: ":"".concat(d||c||o,": ");break;case l.TYPES.CONV_C2C:f=u?"you ":""}return r("div",e({style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{children:[t("span",{children:f}),t("span",{children:n.isRevoked?"recalled a message":n.messageForShow})]}))},m=function(e){if(!e)return null;var r={},t=e.type,a=e.groupProfile,i=e.userProfile;switch(t){case l.TYPES.CONV_C2C:r=i;break;case l.TYPES.CONV_GROUP:r=a;case l.TYPES.CONV_SYSTEM:}return r},v=function(e){var r=e.lastMessage;return C(1e3*r.lastTime)},C=function(e){return e?a(e)?n(e)?i(e,"p"):s(e)?o(e,new Date):c(e)?i(e,"eeee"):i(e,"MMM dd"):i(e,"yyyy MMM dd"):""};export{f as getDisplayImage,p as getDisplayMessage,v as getDisplayTime,u as getDisplayTitle,m as getMessageProfile,C as getTimeStamp};
