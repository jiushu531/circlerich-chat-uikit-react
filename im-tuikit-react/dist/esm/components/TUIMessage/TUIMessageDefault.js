import{__assign as e}from"tslib";import{jsx as o,jsxs as s}from"react/jsx-runtime";import i from"react";import l from"tim-js-sdk/tim-js-friendship";import{MessageBubble as t}from"./MessageBubble.js";import{MessageTip as n}from"./MessageTip.js";import{Avatar as m}from"../Avatar/Avatar.js";import{useComponentContext as a}from"../../context/ComponentContext.js";import{handleDisplayAvatar as r}from"../untils.js";import{MessageSystem as d}from"./MessageSystem.js";import{MessageRevoke as v}from"./MessageRevoke.js";import{MESSAGE_FLOW as u}from"../../constants.js";function c(i){var c=i.message,p=i.MessageContext,f=i.MessagePlugins,g=a(),P=g.MessageContext,S=g.MessagePlugins,M=p||P,T=f||S;return s("div",e({className:"message-default ".concat((null==c?void 0:c.type)===l.TYPES.MSG_GRP_TIP||(null==c?void 0:c.isRevoked)?"tip":null==c?void 0:c.flow)},{children:[(null==c?void 0:c.type)===l.TYPES.MSG_GRP_TIP&&o(n,{message:c}),(null==c?void 0:c.type)===l.TYPES.MSG_GRP_SYS_NOTICE&&o(d,{message:c}),(null==c?void 0:c.isRevoked)&&o(v,{message:c}),(null==c?void 0:c.type)!==l.TYPES.MSG_GRP_TIP&&(null==c?void 0:c.type)!==l.TYPES.MSG_GRP_SYS_NOTICE&&!(null==c?void 0:c.isRevoked)&&s("div",e({className:"".concat(null==c?void 0:c.flow),"data-message-id":null==c?void 0:c.ID},{children:[(null==c?void 0:c.flow)===u.IN&&o(m,{size:32,image:r(null==c?void 0:c.avatar)}),s("main",e({className:"content"},{children:[(null==c?void 0:c.conversationType)===l.TYPES.CONV_GROUP&&(null==c?void 0:c.flow)===u.IN&&o("label",e({htmlFor:"content",className:"name"},{children:(null==c?void 0:c.nick)||(null==c?void 0:c.from)})),o(t,e({message:c,Context:M,Plugins:T},{children:o(M,{message:c})}))]}))]}),null==c?void 0:c.ID)]}))}var p=i.memo(c);function f(s){return s.message,o(p,e({},s))}export{f as TUIMessageDefault};
