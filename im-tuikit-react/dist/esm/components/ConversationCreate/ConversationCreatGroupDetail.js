import{__spreadArray as e,__assign as t,__awaiter as r,__generator as a}from"tslib";import{jsxs as i,Fragment as o,jsx as n}from"react/jsx-runtime";import{useState as c}from"react";import{Input as s}from"../Input/Input.js";import{Icon as u}from"../Icon/Icon.js";import{IconTypes as p}from"../Icon/type.js";import{Avatar as l}from"../Avatar/Avatar.js";import{defaultGroupAvatarAVChatRoom as m,defaultGroupAvatarMeeting as d,defaultGroupAvatarPublic as f,defaultGroupAvatarWork as v}from"../Avatar/default.js";import{PageStateTypes as g}from"./ConversationCreate.js";import{ConversationGroupTypeInfo as h,typeInfoList as N,GroupType as C}from"./ConversationGroupTypeInfo.js";import{useTUIKitContext as b}from"../../context/TUIKitContext.js";function x(x){var y=this,I=x.profileList,j=x.pageState,k=x.setPageState,P=x.createConversation,G=x.setConversationCreated,T=b(),A=T.setActiveConversation,R=T.myProfile,w=e([],I,!0);w.unshift(R);var D=w.map((function(e){return e.nick||e.userID})).toString(),S=c(D.length>=15?"".concat(D.slice(0,12),"..."):D),O=S[0],U=S[1],W=c(""),_=W[0],E=W[1],L=c("Work"),Y=L[0],q=L[1],z=function(e,t){var r=e.target.value;switch(t){case"name":U(r);break;case"id":E(r);break;case"type":q(r)}};return j!==g.GROUP_TYPE?i(o,{children:[i("div",t({className:"tui-conversation-create-group-detail"},{children:[n("div",t({className:"create-group-box create-group-name"},{children:n(s,{maxLength:15,value:O,onChange:function(e){z(e,"name")},border:"bottom",customClassName:"input-group-name",clearable:!0,prefix:n("div",t({className:"input-group-title"},{children:"Group Name"}))})})),n("div",t({className:"create-group-box create-group-id"},{children:n(s,{border:"bottom",customClassName:"input-group-text",clearable:!0,value:_,onChange:function(e){z(e,"id")},prefix:n("div",t({className:"input-group-title"},{children:"Group ID"}))})})),n("div",t({className:"create-group-box create-group-type"},{children:n(s,{disabled:!0,border:"bottom",customClassName:"input-group-text",prefix:n("div",t({className:"input-group-title"},{children:"Group of type"})),suffix:n(u,{onClick:function(){k(g.GROUP_TYPE)},type:p.ARROW_RIGHT,width:7,height:12}),value:Y,onChange:function(e){z(e,"type")}})})),n("div",t({className:"create-group-illustrate"},{children:N.find((function(e){return e.type===Y})).des})),i("div",t({className:"create-group-portrait"},{children:[n("div",t({className:"create-group-portrait-title"},{children:"Participants"})),n("div",t({className:"create-group-portrait-info-container"},{children:I.map((function(e){var r=e.avatar,a=e.userID,o=e.nick;return i("div",t({className:"create-group-portrait-info"},{children:[n(l,{shape:"square",size:50,image:r}),n("div",t({className:"create-group-portrait-info-nick"},{children:o}))]}),a)}))}))]}))]})),n("div",t({className:"tui-conversation-create-next-container"},{children:n("div",t({role:"presentation",className:"tui-conversation-create-next",onClick:function(){return r(y,void 0,void 0,(function(){var e,t;return a(this,(function(r){switch(r.label){case 0:return e=function(e){switch(e){case"Work":return v;case"Public":return f;case"Meeting":return d;case"AVChatRoom":return m;default:return""}}(Y),[4,P({name:O,type:C[Y],groupID:_,avatar:e})];case 1:return t=r.sent(),A(t),G(!1),[2]}}))}))}},{children:"Create"}))}))]}):n(h,{groupType:Y,setGroupType:q,setPageState:k})}export{x as ConversationCreatGroupDetail};
