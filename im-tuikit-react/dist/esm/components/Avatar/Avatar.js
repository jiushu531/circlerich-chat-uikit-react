import{__assign as t}from"tslib";import{jsxs as e,jsx as i}from"react/jsx-runtime";import{useState as n,useRef as o,useEffect as a}from"react";import{Icon as r}from"../Icon/Icon.js";import{IconTypes as c}from"../Icon/type.js";function l(l){var u=l.image,s=l.size,d=void 0===s?32:s,v=l.shape,m=void 0===v?"circle":v,p=l.update,f=l.onClick,x=l.list,h=void 0===x?[]:x,b=n(!1),g=b[0],k=b[1],w=n(!1),E=w[0],N=w[1],L=n(!1),y=L[0],C=L[1],I=n(200),j=I[0],F=I[1],A=o(),B=o();a((function(){k(!1),N(!1)}),[u]),a((function(){var t,e,i;return y&&p?(window.addEventListener("mouseup",z,!1),null===(t=null==A?void 0:A.current)||void 0===t||t.addEventListener("mouseup",R),F(null===(e=null==B?void 0:B.current)||void 0===e?void 0:e.clientWidth)):(window.removeEventListener("mouseup",z,!1),null===(i=null==A?void 0:A.current)||void 0===i||i.removeEventListener("mouseup",R)),function(){var t;window.removeEventListener("mouseup",z,!1),null===(t=null==A?void 0:A.current)||void 0===t||t.removeEventListener("mouseup",R)}}),[y]);var R=function(t){t.stopPropagation()},z=function(){C(!y)};return e("div",t({className:"tui-kit-avatar ".concat(m),style:{flexBasis:"".concat(d,"px"),height:"".concat(d,"px"),objectFit:"cover",width:"".concat(d,"px")},ref:A,role:"button",tabIndex:0,onClick:f},{children:[u&&!g?i("img",{className:"avatar-image ".concat(E?"avatar-image-loaded":""),onError:function(){return k(!0)},onLoad:function(){return N(!0)},alt:u,src:u}):i("div",{className:"tui-kit-avatar ".concat(m),style:{flexBasis:"".concat(d,"px"),height:"".concat(d,"px"),objectFit:"cover",width:"".concat(d,"px"),backgroundColor:"black",borderRadius:"".concat("circle"===m?"50%":"4px")}}),p&&i("div",t({className:"tui-kit-avatar-edit ".concat(y?"displayFlex":""),role:"button",tabIndex:0,onClick:z},{children:i(r,{className:"icon-camera",width:33,height:30,type:c.CAMERA})})),p&&y&&i("ul",t({className:"tui-kit-avatar-list",ref:B,style:{left:"-".concat((j-d)/2,"px")}},{children:h.map((function(e,n){var o="".concat(e).concat(n);return i("li",t({className:"tui-kit-avatar-list-item",role:"menuitem",tabIndex:n,onClick:function(){var t;t=e,z(),p(t)}},{children:i("img",{className:"avatar-image",alt:e,src:e})}),o)}))}))]}))}export{l as Avatar};
