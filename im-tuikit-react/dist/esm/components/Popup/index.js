import{__assign as e}from"tslib";import{jsx as n}from"react/jsx-runtime";import{useRef as o,useLayoutEffect as t}from"react";function r(r){var i=r.show,u=r.close,s=r.children,l=r.className,v=r.root,c=r.handleVisible,d=o();t((function(){var e,n;return i?(window.addEventListener("mouseup",u,!1),null===(e=null==d?void 0:d.current)||void 0===e||e.addEventListener("mouseup",m)):(window.removeEventListener("mouseup",u,!1),null===(n=null==d?void 0:d.current)||void 0===n||n.removeEventListener("mouseup",m)),function(){var e;window.removeEventListener("mouseup",u,!1),null===(e=null==d?void 0:d.current)||void 0===e||e.removeEventListener("mouseup",m)}}),[i]),t((function(){var e=new IntersectionObserver((function(e){var n=e[0],o=n.boundingClientRect,t=n.rootBounds;c&&c({left:o.x<t.width,top:o.bottom+o.height<t.bottom})}),{root:v,threshold:[1]});return d&&i&&e.observe(null==d?void 0:d.current),function(){e.disconnect()}}),[d,i]);var m=function(e){e.stopPropagation()};return i&&n("div",e({role:"button",tabIndex:0,className:"popup ".concat(l),ref:d},{children:s}))}export{r as Popup};
