import{__assign as n}from"tslib";import{jsxs as e,jsx as i}from"react/jsx-runtime";import{useState as a,useEffect as o}from"react";import{Icon as t}from"../Icon/Icon.js";import{IconTypes as r}from"../Icon/type.js";import{Avatar as l}from"../Avatar/Avatar.js";import{defaultGroupAvatarWork as s,defaultUserAvatar as c}from"../Avatar/default.js";import{Switch as m}from"../Switch/Switch.js";import{useTUIKitContext as d}from"../../context/TUIKitContext.js";import{getMessageProfile as v}from"../ConversationPreview/utils.js";import{useConversationUpdate as h}from"../TUIConversationList/hooks/useConversationUpdate.js";import{useConversation as u}from"../../hooks/useConversation.js";function f(){var f=a(null),p=f[0],g=f[1],I=a(null),C=I[0],N=I[1],j=a(!1),k=j[0],D=j[1],w=a(0),x=w[0],U=w[1],A=d("TUIManage"),T=A.conversation,P=A.setActiveConversation,S=A.tim,b=A.TUIManageShow,M=A.setTUIManageShow;h(null,(function(){U((function(n){return n+1}))}));var y=u(S),L=y.pinConversation,z=y.deleteConversation;return o((function(){g(T),N(v(T)),D(!!T&&T.isPinned)}),[T,x]),b&&T&&e("div",n({className:"tui-manage"},{children:[e("div",n({className:"tui-manage-title"},{children:[i(t,{type:r.CANCEL,width:16,height:16,onClick:function(){M(!1)}}),i("span",{children:"Conversation information"})]})),e("div",n({className:"tui-manage-container"},{children:[e("div",n({className:"tui-manage-info"},{children:[i("div",n({className:"info-avatar"},{children:i(l,{size:64,image:(null==C?void 0:C.avatar)||((null==C?void 0:C.groupID)?s:c)})})),i("div",n({className:"info-name"},{children:(null==C?void 0:C.nick)||(null==C?void 0:C.name)})),e("div",n({className:"info-id"},{children:["ID:",(null==C?void 0:C.userID)||(null==C?void 0:C.groupID)]}))]})),e("div",n({className:"tui-manage-handle"},{children:[e("div",n({className:"manage-handle-box"},{children:[i("div",n({className:"manage-handle-title"},{children:"Pin chat"})),i(m,{onChange:function(n){D(n.target.checked),L({conversationID:p.conversationID,isPinned:n.target.checked})},checked:k})]})),i("div",n({className:"manage-handle-box",role:"presentation",onClick:function(){z(p.conversationID),P(null)}},{children:i("div",n({className:"manage-handle-title red"},{children:"Delete"}))}))]}))]}))]}))}export{f as TUIManage};
