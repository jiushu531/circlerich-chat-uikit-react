"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react"),r=require("tim-js-sdk/tim-js-friendship"),n=require("../../../context/TUIKitContext.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("react/jsx-runtime");var u=i(r);exports.useMyProfile=function(){var r=this,i=t.useState(null),a=i[0],o=i[1],l=n.useTUIKitContext("useMyProfile"),s=l.tim,c=l.myProfile,f=t.useCallback((function(){return e.__awaiter(r,void 0,void 0,(function(){var t;return e.__generator(this,(function(e){switch(e.label){case 0:return c?(o(c),[3,3]):[3,1];case 1:return[4,null==s?void 0:s.getMyProfile()];case 2:t=e.sent(),o(null==t?void 0:t.data),e.label=3;case 3:return[2]}}))}))}),[s]),d=t.useCallback((function(t){return e.__awaiter(r,void 0,void 0,(function(){var r,n;return e.__generator(this,(function(i){switch(i.label){case 0:return[4,null==s?void 0:s.updateMyProfile(t)];case 1:return r=i.sent(),n=e.__assign({},a),Object.keys(r.data).map((function(e){return n[e]=r.data[e],e})),o(n),[2,r]}}))}))}),[s]),_=function(e){console.log("onProfileUpdated",e.data)};return t.useEffect((function(){return e.__awaiter(r,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,f()];case 1:return e.sent(),[2]}}))})),null==s||s.on(u.default.EVENT.PROFILE_UPDATED,_),function(){null==s||s.off(u.default.EVENT.PROFILE_UPDATED,_)}}),[s]),{myProfile:a,updateMyProfile:d}};
