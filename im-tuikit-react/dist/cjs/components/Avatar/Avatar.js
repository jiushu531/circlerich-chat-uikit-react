"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react/jsx-runtime"),a=require("react"),i=require("../Icon/Icon.js"),n=require("../Icon/type.js");exports.Avatar=function(r){var c=r.image,o=r.size,s=void 0===o?32:o,u=r.shape,l=void 0===u?"circle":u,d=r.update,v=r.onClick,m=r.list,p=void 0===m?[]:m,x=a.useState(!1),f=x[0],g=x[1],h=a.useState(!1),j=h[0],b=h[1],k=a.useState(!1),E=k[0],_=k[1],w=a.useState(200),y=w[0],I=w[1],N=a.useRef(),L=a.useRef();a.useEffect((function(){g(!1),b(!1)}),[c]),a.useEffect((function(){var e,t,a;return E&&d?(window.addEventListener("mouseup",q,!1),null===(e=null==N?void 0:N.current)||void 0===e||e.addEventListener("mouseup",C),I(null===(t=null==L?void 0:L.current)||void 0===t?void 0:t.clientWidth)):(window.removeEventListener("mouseup",q,!1),null===(a=null==N?void 0:N.current)||void 0===a||a.removeEventListener("mouseup",C)),function(){var e;window.removeEventListener("mouseup",q,!1),null===(e=null==N?void 0:N.current)||void 0===e||e.removeEventListener("mouseup",C)}}),[E]);var C=function(e){e.stopPropagation()},q=function(){_(!E)};return t.jsxs("div",e.__assign({className:"tui-kit-avatar ".concat(l),style:{flexBasis:"".concat(s,"px"),height:"".concat(s,"px"),objectFit:"cover",width:"".concat(s,"px")},ref:N,role:"button",tabIndex:0,onClick:v},{children:[c&&!f?t.jsx("img",{className:"avatar-image ".concat(j?"avatar-image-loaded":""),onError:function(){return g(!0)},onLoad:function(){return b(!0)},alt:c,src:c}):t.jsx("div",{className:"tui-kit-avatar ".concat(l),style:{flexBasis:"".concat(s,"px"),height:"".concat(s,"px"),objectFit:"cover",width:"".concat(s,"px"),backgroundColor:"black",borderRadius:"".concat("circle"===l?"50%":"4px")}}),d&&t.jsx("div",e.__assign({className:"tui-kit-avatar-edit ".concat(E?"displayFlex":""),role:"button",tabIndex:0,onClick:q},{children:t.jsx(i.Icon,{className:"icon-camera",width:33,height:30,type:n.IconTypes.CAMERA})})),d&&E&&t.jsx("ul",e.__assign({className:"tui-kit-avatar-list",ref:L,style:{left:"-".concat((y-s)/2,"px")}},{children:p.map((function(a,i){var n="".concat(a).concat(i);return t.jsx("li",e.__assign({className:"tui-kit-avatar-list-item",role:"menuitem",tabIndex:i,onClick:function(){var e;e=a,q(),d(e)}},{children:t.jsx("img",{className:"avatar-image",alt:a,src:a})}),n)}))}))]}))};
