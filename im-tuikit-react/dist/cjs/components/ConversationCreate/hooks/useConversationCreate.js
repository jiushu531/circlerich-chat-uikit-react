"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),r=require("react"),t=require("tim-js-sdk/tim-js-friendship"),n=require("../static/word.js"),i=require("../../../hooks/useProfile.js");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=u(t);exports.useConversationCreate=function(t,u,s){var c=r.useState({}),a=c[0],f=c[1],d=function(e){var r=e.trim(),t=r.charCodeAt(0);return t>40869||t<19968?r.charAt(0):n.strChineseFirstPy.charAt(t-19968)},l=function(){return e.__awaiter(void 0,void 0,void 0,(function(){var r,n,i,c,a;return e.__generator(this,(function(e){switch(e.label){case 0:return r=u.filter((function(e){return e.type===o.default.TYPES.CONV_C2C})).slice(0,5).map((function(e){return e.userProfile})),[4,t.getFriendList()];case 1:return n=e.sent(),i=n.code,c=n.data,0===i&&(a=v(c.map((function(e){return e.profile})),r),f(a),s&&s(a,f)),[2]}}))}))},v=function(e,r){void 0===r&&(r=[]);for(var t={"Frequently Contacted":r,"#":[]},n=65;n<=90;n+=1)t[String.fromCharCode(n)]=[];return e.forEach((function(e){var r=e.nick,n=e.userID,i=d(r||n);i>="a"&&i<="z"?t[i.toLocaleUpperCase()].push(e):i<"A"||i>"z"?t["#"].push(e):t[i].push(e)})),Object.keys(t).forEach((function(e){t[e].sort((function(e,r){var t=e.nick,n=e.userID,i=r.nick,u=r.userID;return t||n<i||u||t||n===i||u?1:-1}))})),t},h=i.useProfile(t).getUserProfile;return r.useEffect((function(){l()}),[t]),{getFirstLetter:d,queryFriendList:l,getFriendListSortSearchResult:function(r){return e.__awaiter(void 0,void 0,void 0,(function(){var t,n,i,u;return e.__generator(this,(function(e){switch(e.label){case 0:return r?[4,h([r])]:[2,a];case 1:return t=e.sent().data,n={},i=!1,Object.keys(a).forEach((function(e){n[e]=a[e].filter((function(e){var t=e.nick,n=e.userID,u=t?t.includes(r):n.includes(r);return i=i||u,u}))})),"TencentCloudDemo"===(null===(u=process.env)||void 0===u?void 0:u.REACT_APP_ONLINE)?[2,n]:[2,i?n:v(t)]}}))}))},friendListSortResult:a}};
