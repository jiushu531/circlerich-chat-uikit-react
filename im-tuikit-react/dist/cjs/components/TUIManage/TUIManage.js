"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),n=require("react/jsx-runtime"),s=require("react"),a=require("../Icon/Icon.js"),i=require("../Icon/type.js"),t=require("../Avatar/Avatar.js"),r=require("../Avatar/default.js"),o=require("../Switch/Switch.js"),l=require("../../context/TUIKitContext.js"),c=require("../ConversationPreview/utils.js"),u=require("../TUIConversationList/hooks/useConversationUpdate.js"),d=require("../../hooks/useConversation.js");exports.TUIManage=function(){var v=s.useState(null),g=v[0],h=v[1],j=s.useState(null),m=j[0],_=j[1],x=s.useState(!1),f=x[0],I=x[1],C=s.useState(0),p=C[0],N=C[1],q=l.useTUIKitContext("TUIManage"),U=q.conversation,k=q.setActiveConversation,S=q.tim,A=q.TUIManageShow,D=q.setTUIManageShow;u.useConversationUpdate(null,(function(){N((function(e){return e+1}))}));var T=d.useConversation(S),w=T.pinConversation,M=T.deleteConversation;return s.useEffect((function(){h(U),_(c.getMessageProfile(U)),I(!!U&&U.isPinned)}),[U,p]),A&&U&&n.jsxs("div",e.__assign({className:"tui-manage"},{children:[n.jsxs("div",e.__assign({className:"tui-manage-title"},{children:[n.jsx(a.Icon,{type:i.IconTypes.CANCEL,width:16,height:16,onClick:function(){D(!1)}}),n.jsx("span",{children:"Conversation information"})]})),n.jsxs("div",e.__assign({className:"tui-manage-container"},{children:[n.jsxs("div",e.__assign({className:"tui-manage-info"},{children:[n.jsx("div",e.__assign({className:"info-avatar"},{children:n.jsx(t.Avatar,{size:64,image:(null==m?void 0:m.avatar)||((null==m?void 0:m.groupID)?r.defaultGroupAvatarWork:r.defaultUserAvatar)})})),n.jsx("div",e.__assign({className:"info-name"},{children:(null==m?void 0:m.nick)||(null==m?void 0:m.name)})),n.jsxs("div",e.__assign({className:"info-id"},{children:["ID:",(null==m?void 0:m.userID)||(null==m?void 0:m.groupID)]}))]})),n.jsxs("div",e.__assign({className:"tui-manage-handle"},{children:[n.jsxs("div",e.__assign({className:"manage-handle-box"},{children:[n.jsx("div",e.__assign({className:"manage-handle-title"},{children:"Pin chat"})),n.jsx(o.Switch,{onChange:function(e){I(e.target.checked),w({conversationID:g.conversationID,isPinned:e.target.checked})},checked:f})]})),n.jsx("div",e.__assign({className:"manage-handle-box",role:"presentation",onClick:function(){M(g.conversationID),k(null)}},{children:n.jsx("div",e.__assign({className:"manage-handle-title red"},{children:"Delete"}))}))]}))]}))]}))};
