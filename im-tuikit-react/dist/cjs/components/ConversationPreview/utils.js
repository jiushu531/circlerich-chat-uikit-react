"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),r=require("react/jsx-runtime"),t=require("date-fns"),a=require("tim-js-sdk/tim-js-friendship");require("react"),require("../Icon/config.js"),require("../Icon/type.js");var s=require("../Avatar/default.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=i(a),u=function(e){if(!e)return null;var r={},t=e.type,a=e.groupProfile,s=e.userProfile;switch(t){case n.default.TYPES.CONV_C2C:r=s;break;case n.default.TYPES.CONV_GROUP:r=a;case n.default.TYPES.CONV_SYSTEM:}return r},l=function(e){return e?t.isThisYear(e)?t.isToday(e)?t.format(e,"p"):t.isYesterday(e)?t.formatDistance(e,new Date):t.isThisWeek(e)?t.format(e,"eeee"):t.format(e,"MMM dd"):t.format(e,"yyyy MMM dd"):""};exports.getDisplayImage=function(e){var r=e.type,t=u(e).avatar,a=t;if(!t)switch(r){case n.default.TYPES.CONV_C2C:a="";break;case n.default.TYPES.CONV_GROUP:default:a=s.defaultGroupAvatarWork}return a},exports.getDisplayMessage=function(t,a){var s=t.lastMessage,i=t.type,u=s.fromAccount,l=s.nick,o=s.nameCard,c=s.isRevoked,d="";switch(i){case n.default.TYPES.CONV_GROUP:d=(null==s?void 0:s.fromAccount)===(null==a?void 0:a.userID)?"You: ":"".concat(o||l||u,": ");break;case n.default.TYPES.CONV_C2C:d=c?"you ":""}return r.jsxs("div",e.__assign({style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{children:[r.jsx("span",{children:d}),r.jsx("span",{children:s.isRevoked?"recalled a message":s.messageForShow})]}))},exports.getDisplayTime=function(e){var r=e.lastMessage;return l(1e3*r.lastTime)},exports.getDisplayTitle=function(t,a,s){void 0===s&&(s="#147AFF");var i=u(t),l=i.name,o=i.nick,c=i.groupID,d=i.userID,f="";switch(t.type){case n.default.TYPES.CONV_C2C:f=o||d;break;case n.default.TYPES.CONV_GROUP:f=l||c;break;default:f=""}var p,v;return a?(v=(p=f).indexOf(a),r.jsxs("div",{children:[r.jsx("span",{children:p.slice(0,v)}),r.jsx("span",e.__assign({style:{color:s}},{children:a})),r.jsx("span",{children:p.slice(v+a.length)})]})):f},exports.getMessageProfile=u,exports.getTimeStamp=l;
