"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),n=require("react/jsx-runtime"),s=require("react"),i=require("../Avatar/Avatar.js"),t=require("../Icon/Icon.js"),a=require("../Icon/type.js"),o=require("../Plugins/index.js"),r=require("../../hooks/useConversation.js"),c=require("../../context/TUIKitContext.js");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(l){var u=l.conversation,v=l.Avatar,d=void 0===v?i.Avatar:v,m=l.displayImage,p=l.displayTitle,x=l.displayMessage,j=l.displayTime,_=l.unread,g=l.active,h=l.setActiveConversation,C=s.useRef(null),f=g?"conversation-preview-content--active":"",N=_&&_>=1?"conversation-preview-content--unread":"",P=u.isPinned?"conversation-preview-content--pin":"",y=s.useState(!1),I=y[0],w=y[1],b=c.useTUIKitContext("ConversationPreviewContent"),q=b.tim,M=b.conversation,k=r.useConversation(q),A=k.pinConversation,T=k.deleteConversation,D=function(e){var n=u.conversationID,s=u.isPinned;switch(e){case"pin":A({conversationID:n,isPinned:!s});break;case"delete":T(n),u===M&&h(null)}};return n.jsxs("button",e.__assign({type:"button","aria-selected":g,role:"option",className:"conversation-preview-container ".concat(f," ").concat(N," ").concat(P),onClick:function(){h&&h(u),(null==C?void 0:C.current)&&C.current.blur()},onMouseEnter:function(){w(!0)},onMouseLeave:function(){w(!1)},ref:C},{children:[n.jsx("div",e.__assign({className:"avatar"},{children:n.jsx(d,{image:m,name:p,size:40})})),n.jsxs("div",e.__assign({className:"content"},{children:[n.jsx("div",e.__assign({className:"title"},{children:p})),n.jsx("div",e.__assign({className:"message"},{children:x}))]})),n.jsxs("div",e.__assign({className:"external"},{children:[_?n.jsx("div",e.__assign({className:"unread"},{children:_<=99?_:"99+"})):n.jsx("div",{className:"unread"}),I?n.jsx("div",e.__assign({className:"".concat(I?"more--hover":"more")},{children:n.jsx(o.Plugins,{customClass:"more-handle-box",plugins:[n.jsx("div",e.__assign({role:"presentation",className:"more-handle-item",onClick:function(e){e.stopPropagation(),D("pin")}},{children:u.isPinned?"Cancel Pin":"Pin"})),n.jsx("div",e.__assign({className:"more-handle-item",style:{color:"#FF584C"},onClick:function(e){e.stopPropagation(),D("delete")},role:"presentation"},{children:"Delete"}))],showNumber:0,MoreIcon:n.jsx(t.Icon,{className:"icon-more",width:16,height:16,type:a.IconTypes.MORE})})})):n.jsx("div",e.__assign({className:"time"},{children:j}))]}))]}))}var v=l(s).default.memo(u);exports.ConversationPreviewContent=v,exports.unMemoConversationPreviewContent=u;
