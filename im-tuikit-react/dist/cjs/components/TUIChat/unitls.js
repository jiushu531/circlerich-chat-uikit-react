"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),s=require("tim-js-sdk/tim-js-friendship"),t=require("../../constants.js"),n=require("../untils.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=i(s);exports.handleEditMessage=function(s,t){var n=e.__spreadArray([],s,!0),i=n.findIndex((function(e){return(null==e?void 0:e.ID)===(null==t?void 0:t.ID)}));return n[i]=t,n},exports.handleMessage=function(e){var s=null;return e.filter((function(e){var i;return e.type===r.default.TYPES.MSG_CUSTOM&&(s=n.JSONStringToParse(null===(i=null==e?void 0:e.payload)||void 0===i?void 0:i.data)),!s||(null==s?void 0:s.businessID)!==t.default.TYPE_TYPING}))},exports.handleMessageList=function(e,s){var t,n={messageList:[],lastMessageID:"",isSameLastMessageID:!1};e.length<=1&&(n.messageList=e),n.messageList=[e[e.length-1]];for(var i=function(s){n.messageList.every((function(t){var n;return(null==t?void 0:t.ID)!==(null===(n=e[s])||void 0===n?void 0:n.ID)}))&&n.messageList.unshift(e[s])},r=e.length-2;r>=0;r-=1)i(r);return n.messageList.length>=1&&(n.lastMessageID=null===(t=null==n?void 0:n.messageList[n.messageList.length-1])||void 0===t?void 0:t.ID),n.messageList=n.messageList.filter((function(e){return!(null==e?void 0:e.isDeleted)})),n.isSameLastMessageID=(null==n?void 0:n.lastMessageID)===(null==s?void 0:s.lastMessageID),n},exports.handleRemoveMessage=function(s,t){var n=e.__spreadArray([],s,!0),i=n.findIndex((function(e){return(null==e?void 0:e.ID)===(null==t?void 0:t.ID)}));return n.splice(i,1),n};
