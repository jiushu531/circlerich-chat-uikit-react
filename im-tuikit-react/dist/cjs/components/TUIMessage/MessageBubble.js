"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),s=require("react/jsx-runtime"),a=require("react"),n=require("tim-js-sdk/tim-js-friendship"),i=require("../../constants.js"),l=require("../Icon/Icon.js"),t=require("../Icon/type.js"),u=require("./hooks/useMessageReply.js");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=r(a),o=r(n);function d(n){var r=n.message,c=n.children,d=n.Context,g=n.Plugins,m=a.useState(!1),_=m[0],b=m[1],S=u.useMessageReply({message:r}),j=S.messageReply,p=S.replyMessage,v=S.sender;return s.jsxs("div",e.__assign({className:"meesage-bubble"},{children:[s.jsxs("div",e.__assign({className:"meesage-bubble-context ".concat(null==r?void 0:r.flow),onMouseEnter:function(){b(!0)},onMouseLeave:function(){b(!1)}},{children:[s.jsxs("div",e.__assign({className:"message-context\n            ".concat(j?"meesage-bubble-reply meesage-bubble-reply-".concat(null==r?void 0:r.flow):"","\n            ").concat((null==r?void 0:r.type)!==o.default.TYPES.MSG_IMAGE&&(null==r?void 0:r.type)!==o.default.TYPES.MSG_VIDEO&&(null==r?void 0:r.type)!==o.default.TYPES.MSG_FILE||(null==r?void 0:r.status)!==i.MESSAGE_STATUS.UNSEND?"":"loading")},{children:[j&&s.jsxs("main",e.__assign({className:"meesage-bubble-reply-main"},{children:[s.jsx("header",e.__assign({className:"title"},{children:v})),d&&s.jsx(d,{message:p})]})),c]})),s.jsx("div",e.__assign({className:"message-plugin"},{children:_&&g&&s.jsx(g,{})}))]})),s.jsxs("div",e.__assign({className:"message-bubble-status icon"},{children:[(null==r?void 0:r.status)===i.MESSAGE_STATUS.FAIL&&s.jsx("i",{className:"icon-fail"}),(null==r?void 0:r.status)===i.MESSAGE_STATUS.UNSEND&&s.jsx(l.Icon,{width:10,height:10,type:t.IconTypes.PROGRESS})]}))]}))}var g=c.default.memo(d);exports.MessageBubble=function(a){return s.jsx(g,e.__assign({},a))};
