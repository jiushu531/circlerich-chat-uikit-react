"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),s=require("react/jsx-runtime"),a=require("react"),l=require("tim-js-sdk/tim-js-friendship"),i=require("./MessageBubble.js"),n=require("./MessageTip.js"),t=require("../Avatar/Avatar.js"),u=require("../../context/ComponentContext.js"),o=require("../untils.js"),r=require("./MessageSystem.js"),d=require("./MessageRevoke.js"),v=require("../../constants.js");function g(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var _=g(a),c=g(l);function m(a){var l=a.message,g=a.MessageContext,_=a.MessagePlugins,m=u.useComponentContext(),j=m.MessageContext,f=m.MessagePlugins,M=g||j,S=_||f;return s.jsxs("div",e.__assign({className:"message-default ".concat((null==l?void 0:l.type)===c.default.TYPES.MSG_GRP_TIP||(null==l?void 0:l.isRevoked)?"tip":null==l?void 0:l.flow)},{children:[(null==l?void 0:l.type)===c.default.TYPES.MSG_GRP_TIP&&s.jsx(n.MessageTip,{message:l}),(null==l?void 0:l.type)===c.default.TYPES.MSG_GRP_SYS_NOTICE&&s.jsx(r.MessageSystem,{message:l}),(null==l?void 0:l.isRevoked)&&s.jsx(d.MessageRevoke,{message:l}),(null==l?void 0:l.type)!==c.default.TYPES.MSG_GRP_TIP&&(null==l?void 0:l.type)!==c.default.TYPES.MSG_GRP_SYS_NOTICE&&!(null==l?void 0:l.isRevoked)&&s.jsxs("div",e.__assign({className:"".concat(null==l?void 0:l.flow),"data-message-id":null==l?void 0:l.ID},{children:[(null==l?void 0:l.flow)===v.MESSAGE_FLOW.IN&&s.jsx(t.Avatar,{size:32,image:o.handleDisplayAvatar(null==l?void 0:l.avatar)}),s.jsxs("main",e.__assign({className:"content"},{children:[(null==l?void 0:l.conversationType)===c.default.TYPES.CONV_GROUP&&(null==l?void 0:l.flow)===v.MESSAGE_FLOW.IN&&s.jsx("label",e.__assign({htmlFor:"content",className:"name"},{children:(null==l?void 0:l.nick)||(null==l?void 0:l.from)})),s.jsx(i.MessageBubble,e.__assign({message:l,Context:M,Plugins:S},{children:s.jsx(M,{message:l})}))]}))]}),null==l?void 0:l.ID)]}))}var j=_.default.memo(m);exports.TUIMessageDefault=function(a){return a.message,s.jsx(j,e.__assign({},a))};
