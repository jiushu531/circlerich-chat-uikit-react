"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),n=require("react/jsx-runtime"),t=require("react"),r=require("../../context/TUIKitContext.js"),i=require("./hooks/useConversationList.js"),o=require("../ConversationPreview/ConversationPreview.js"),s=require("../Icon/Icon.js"),a=require("../Icon/type.js");require("tim-js-sdk/tim-js-friendship");var v=require("../ConversationPreview/ConversationListContainer.js"),u=require("../Profile/Profile.js"),c=require("../ConversationSearch/ConversationSearchInput.js"),l=require("../ConversationSearch/ConversationSearchResult.js"),C=require("../ConversationCreate/ConversationCreate.js");require("../ConversationCreate/ConversationGroupTypeInfo.js");var d=require("../ConversationPreview/utils.js"),j=require("./hooks/useConversationUpdate.js");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function h(f){var h=f.Preview,p=f.Container,x=void 0===p?v.ConversationListContainer:p,q=f.onConversationListUpdated,g=r.useTUIKitContext("TUIConversationList"),I=g.tim,m=g.customClasses,P=g.conversation,_=g.setActiveConversation,U=g.setTUIProfileShow,L=t.useState(0),S=L[0],T=L[1],w=i(I,(function(e,n){e.length&&_(P||e[0])})),y=w.conversationList,b=w.setConversationList;j.useConversationUpdate(b,q,(function(){return T((function(e){return e+1}))}));var k=t.useState(""),A=k[0],N=k[1],R=t.useState(y),K=R[0],D=R[1],E=t.useState(!1),M=E[0],F=E[1],G=r.useTUIKitContext().myProfile,O=t.useRef(null);return n.jsx("div",e.__assign({className:"tui-conversation ".concat(m||""),ref:O},{children:M?n.jsx(C.ConversationCreate,{conversationList:y,setConversationCreated:F}):n.jsxs(n.Fragment,{children:[n.jsx(u.Profile,{profile:G,handleAvatar:function(){U(!0)}}),n.jsxs("div",e.__assign({className:"tui-conversation-header"},{children:[n.jsx(c.ConversationSearchInput,{value:A,clearable:!0,onChange:function(e){var n,t;if(N(null===(n=e.target)||void 0===n?void 0:n.value),null===(t=e.target)||void 0===t?void 0:t.value){var r=y.filter((function(n){var t;return d.getDisplayTitle(n).includes(null===(t=e.target)||void 0===t?void 0:t.value)}));D(r)}else D([])}}),n.jsx("div",e.__assign({className:"tui-conversation-create-icon"},{children:n.jsx(s.Icon,{onClick:function(){N(""),F(!0)},type:a.IconTypes.CREATE,height:24,width:24})}))]})),n.jsx(x,e.__assign({setConversationList:b},{children:0===y.length?n.jsx("div",e.__assign({style:{padding:"0 20px"}},{children:"No conversation"})):A?n.jsx(l.ConversationSearchResult,{Preview:h,searchValue:A,result:K}):y.map((function(t){var r={activeConversation:P,conversation:t,setActiveConversation:_,Preview:h,conversationUpdateCount:S};return n.jsx(o.ConversationPreview,e.__assign({},r),t.conversationID)}))}))]})}))}var p=f(t).default.memo(h);exports.TUIConversationList=p,exports.UnMemoTUIConversationList=h;
